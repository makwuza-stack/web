<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GS GAKORO Analytics Dashboard</title>
<style>
  body { font-family: 'Segoe UI', sans-serif; background: #121212; color: #fff; margin: 0; padding: 0; }
  header { background: linear-gradient(90deg, #ff6600, #ff9900); text-align: center; padding: 30px 20px; }
  header h1 { margin: 0; font-size: 2em; }
  header p { margin: 5px 0 0; color: #fff8; }
  main { max-width: 1000px; margin: 40px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; padding: 0 20px; }
  .card-link { text-decoration: none; color: inherit; }
  .card { background: #1e1e1e; border-radius: 12px; padding: 25px; text-align: center; transition: transform 0.3s, background 0.3s; cursor: pointer; }
  .card:hover { transform: translateY(-5px); background: #333333; }
  .card h2 { font-size: 1.5em; margin: 15px 0 10px; color: #ff9900; }
  .card p { font-size: 1em; color: #aaa; margin: 10px 0; }
  .counter { font-size: 1.4em; color: #00aaff; margin-top: 5px; }
  footer { background: #001f3f; text-align: center; padding: 20px; color: #fff; margin-top: 40px; }
  #resetBtn { margin: 20px auto; display: block; padding: 10px 20px; font-size: 16px; background: #ff3300; color: white; border: none; border-radius: 8px; cursor: pointer; }
</style>
</head>
<body>

<header>
  <h1>ğŸ“Š GS GAKORO Analytics Dashboard</h1>
  <p>Monitor Site, Articles, Media, and Users Metrics</p>
</header>

<main>
  <a href="site.html" class="card-link">
    <div class="card">
      <h2>ğŸŒ Site Visits</h2>
      <p>Total & Unique Visitors</p>
      <div class="counter" id="siteVisitsCounter">â€”</div>
    </div>
  </a>

  <a href="articles.html" class="card-link">
    <div class="card">
      <h2>ğŸ“° Article Views</h2>
      <p>Total Views</p>
      <div class="counter" id="articleViewsCounter">â€”</div>
    </div>
  </a>

  <a href="videos.html" class="card-link">
    <div class="card">
      <h2>ğŸ“º Media TV</h2>
      <p>Total Views</p>
      <div class="counter" id="videoViewsCounter">â€”</div>
    </div>
  </a>

  <a href="users.html" class="card-link">
    <div class="card">
      <h2>ğŸ‘¥ Users</h2>
      <p>Active Users</p>
      <div class="counter" id="usersCounter">â€”</div>
    </div>
  </a>
</main>

<button id="resetBtn">ğŸ”„ Reset All Counters</button>

<footer>
  &copy; 2025 GS GAKORO | Designed by DOD Makuza Celestin
</footer>

<script>
  const API_DASHBOARD = "https://script.google.com/macros/s/AKfycbzGr-gfqYHO7-wAG29rGejOuyFP8pr0D20mIUZSnivlXTQikRySpUzES5Mx5jLdAnipkQ/exec";

  async function updateCounters() {
    try {
      const res = await fetch(API_DASHBOARD);
      const data = await res.json();
      document.getElementById('siteVisitsCounter').textContent = data.site;
      document.getElementById('articleViewsCounter').textContent = data.articles;
      document.getElementById('videoViewsCounter').textContent = data.videos;
      document.getElementById('usersCounter').textContent = data.users;
    } catch (err) {
      console.error(err);
      ['siteVisitsCounter','articleViewsCounter','videoViewsCounter','usersCounter']
        .forEach(id => document.getElementById(id).textContent = 'Error');
    }
  }

  document.getElementById('resetBtn').addEventListener('click', async () => {
    if (!confirm("Are you sure you want to reset all counters?")) return;
    const password = prompt("Enter admin password:");
    if (!password) return alert("Password required.");

    try {
      const url = `${API_DASHBOARD}?reset=true&password=${encodeURIComponent(password)}`;
      const res = await fetch(url);
      const data = await res.json();
      if (data.success) {
        alert("âœ… All counters have been reset successfully.");
        updateCounters();
      } else {
        alert("âŒ Reset failed: " + (data.message || "Unknown error"));
      }
    } catch (err) {
      console.error("Reset error:", err);
      alert("âŒ Error resetting counters. See console.");
    }
  });

  updateCounters();
  setInterval(updateCounters, 30000);
</script>
</body>
</html>
